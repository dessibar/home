<!DOCTYPE html> 
<html class="home-bg">

<head>
  <title>DESSIBAR Project</title>
  <style>
     #map {
        height:600px;
        width:100%;
     }
  </style>
  <meta http-equiv="content-type" content="text/html; charset=windows-1252" />
  <link rel="stylesheet" type="text/css" href="css/style.css" />
  <!-- modernizr enables HTML5 elements and feature detects -->
  <script type="text/javascript" src="js/jquery.js"></script>
  <!-- <script type="text/javascript" src="js/modernizr-1.5.min.js"></script> -->

</head>

<body>

   <h1>Icelandic and Barents Sea Stock Visualization Tool</h1>
   <div id="map"></div>
   <script>
      function initMap(){
         var options = {
            zoom:6,
            center:{lat:62.641066,lng:-12.704159}
      }
      
      var map = new google.maps.Map(document.getElementById('map'), options);
        
      var latitude_int = 62;
      var latitude_dec = 746852;
      var longitude_int = -17;
      var longitude_dec = 614076;
      
      var capelinImage;  
      var markers = [];
      
      addMarker({coords:{lat:61.022328,lng:-17.311841}});
      iconImage:'https://raw.githubusercontent.com/dessibar/home/master/images/capelin_red.png',
      content:'<h1>Location: 61.022328, -17.311841; Stock Size: 19894</h1>'  
        
      var i = 0  
        
      do { 
        
         var stockNumber = Math.floor(Math.random() * 20000);
         
         if (stockNumber < 14000) {
           capelinImage = 'https://raw.githubusercontent.com/dessibar/home/master/images/capelin_green.png';
         }
         else if (stockNumber < 18000) {
           capelinImage = 'https://raw.githubusercontent.com/dessibar/home/master/images/capelin_yellow.png';
         }
         else {
           capelinImage = 'https://raw.githubusercontent.com/dessibar/home/master/images/capelin_red.png';
         }        
        
        var stringLatitude = latitude_int + "." + latitude_dec;
        var stringLongitude = longitude_int + "." + longitude_dec;
        
        var latLng = {
           lat: stringLatitude,
           lng: stringLongitude
        };
        
        var imageString = "iconImage:'" + capelinImage + "'";
        
        addMarker({"coords:{lat:" + stringLatitude + ",lng:" + stringLongitude" + "}", "iconImage:" + capelinImage + ", content: " + stockNumber}); 
        
        if (longitude_dec < 100000){
           longitude_dec = 1000000 - longitude_dec;
           longitude_int = longitude_int + 1;
           }
         else {
           longitude_dec = longitude_dec - 100000;
         }
        
        if (latitude_dec < 100000){
         latitude_dec = 1000000 - latitude_dec;
         latitude_int = latitude_int - 1;
        }
        else {
         latitude_dec = latitude_dec - 100000;
        }
        
      i = i + 1;
        
      } while (i<10);
        
        
      /*
        
      do {
        
        do {        
          
         var stock = Math.floor(Math.random() * 20000);
         
         if (stock < 3000) {
           capelinImage = 'https://raw.githubusercontent.com/dessibar/home/master/images/capelin_green.png';
         }
         else if (stock < 10000) {
           capelinImage = 'https://raw.githubusercontent.com/dessibar/home/master/images/capelin_yellow.png';
         }
         else {
           capelinImage = 'https://raw.githubusercontent.com/dessibar/home/master/images/capelin_red.png';
         }        
         
         var coordsString = "coords:{lat:" + latitude_int + "." + latitude_dec + ",lng:" + longitude_int + "." + longitude_dec;
         var imageString = "iconImage:'" + capelinImage + "'";
          
         markers.push({
           coordsString,
           imageString           
         });
         
         if (longitude_dec < 100000){
           longitude_dec = 1000000 - longitude_dec;
           longitude_int = longitude_int + 1;
           }
         else {
           longitude_dec = longitude_dec - 100000;
         }
         
        }
        while (latitude_int != -16);
          
        
         
      if (latitude_dec < 100000){
         latitude_dec = 1000000 - latitude_dec;
         latitude_int = latitude_int - 1;
      }
       else {
         latitude_dec = latitude_dec - 100000;
      }
        
      }
      while (latitude_int != 61);  
        
      */
       
      /* 
        
      {
        coords:{lat:63.049766,lng:-17.614076},
        iconImage:'https://raw.githubusercontent.com/dessibar/home/master/images/capelin_green.png',
        content:'<h1>Location: 63.049766, -17.614076; Stock Size: 539</h1>'
      },
        
      {
        coords:{lat:63.022358,lng:-17.311841},
        iconImage:'https://raw.githubusercontent.com/dessibar/home/master/images/capelin_green.png',
        content:'<h1>Location: 63.022358, -17.311841; Stock Size: 612</h1>'
      },
        
      {
        coords:{lat:62.829776,lng:-16.465583},
        iconImage:'https://raw.githubusercontent.com/dessibar/home/master/images/capelin_yellow.png',
        content:'<h1>Location: 62.829776, -16.465583; Stock Size: 8642</h1>'
      },
        
      {
        coords:{lat:61.022328,lng:-17.311841},
        iconImage:'https://raw.githubusercontent.com/dessibar/home/master/images/capelin_red.png',
        content:'<h1>Location: 61.022328, -17.311841; Stock Size: 19894</h1>'
      },
      
      
      */
        
      
      for(var i = 0;i < markers.length;i++){
        addMarker(markers[i]);
        console.log(markers[i]);
      }
        
      function addMarker(location, stock, image){
        var marker = new google.maps.Marker({
          position:location,
          iconImage:image,
          map:map,
          content:stock
        });
      }
       
      function addMarker(props){
        var marker = new google.maps.Marker({
          position:props.coords,
          map:map,
          icon:props.iconImage
        });

        // Check content
        if(props.content){
          var infoWindow = new google.maps.InfoWindow({
            content:props.content
          });

          marker.addListener('click', function(){
            infoWindow.open(map, marker);
          });
        }
      }
   }
   </script>

   <script async defer 
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyD27I7bId1Hmqthv5gTTh15GKAgkiFM538&callback=initMap">
      </script>
      
</body>
</html>
